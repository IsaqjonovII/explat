import{u as S,_ as I}from"./FilterDateRange.vue_vue_type_script_setup_true_lang-B4G5KdfN.js";import{d as $,g as p,o as m,i as C,t as s,b as e,u as n,p as b,x as h,c as T,k as D,y as O,a as Y,w as u,e as c,z as M,f as B,A as R,B as U,C as H}from"./index-8FvB9lgi.js";import{B as P,_ as j,a as F}from"./FormFilterLabel.vue_vue_type_script_setup_true_lang-C45pJbku.js";import{_ as N}from"./CAmount.vue_vue_type_script_setup_true_lang-CJbXMlvo.js";import{_ as z}from"./CDevice.vue_vue_type_script_setup_true_lang-C-DWbzro.js";import{_ as A}from"./CRequisites.vue_vue_type_script_setup_true_lang-BNSjNOnM.js";import{u as E}from"./useTableFetch-24INAtW3.js";import{_ as L}from"./BaseButton.vue_vue_type_script_setup_true_lang-CtVDCKKl.js";import{_ as Q}from"./BaseModal.vue_vue_type_script_setup_true_lang-CTAF7Sob.js";import{f as V}from"./common-BG67uGBz.js";import"./FormInput-FCPyqpWb.js";const q=$({__name:"CBadge",props:{status:{}},setup(o){return(_,i)=>(m(),p("div",{class:C(["w-max px-2 text-[16px] py-0.5 rounded-[6px]",{"bg-green text-white":o.status==="success","bg-yellow-dark text-white":o.status==="pending","bg-red-light text-white":o.status==="canceled"}])},s(_.$t(`statuses.${o.status}`)),3))}}),G={class:"flex items-center gap-1.5"},J={class:"text-sm"},K={class:"text-sm font-semibold text-dark-black"},W={key:0,class:"text-xs text-gray-1"},X={key:1,class:"text-sm text-gray-1"},Z={class:"flex items-center mt-1 gap-1.5"},ee={class:"text-sm"},te={class:"text-sm font-semibold text-dark-black"},se={key:0,class:"text-xs text-gray-1"},ae={key:1,class:"text-sm text-gray-1"},oe=$({__name:"CDate",props:{date:{},time:{},timeIsReady:{type:Boolean},pendingIsReady:{type:Boolean},pending_date:{},pending_time:{}},setup(o){return(_,i)=>(m(),p("div",null,[e("div",G,[e("p",J,s(_.$t("dates.created_at")),1),e("p",K,s(n(b)(o.date).format("DD.MM.YYYY")),1),o.timeIsReady?(m(),p("span",W,s(o.time),1)):(m(),p("span",X,s(n(b)(o.time).format("HH:mm")),1))]),e("div",Z,[e("p",ee,s(_.$t("dates.end_at")),1),e("p",te,s(n(b)(o.pending_date).format("DD.MM.YYYY")),1),o.pendingIsReady?(m(),p("span",se,s(o.pending_time),1)):(m(),p("span",ae,s(n(b)(o.pending_time).format("HH:mm")),1))])]))}}),ne=()=>{const{t:o}=h();return[{id:1,name:o("statuses.all_statuses"),key:"all"},{id:2,name:o("statuses.success"),key:"success"},{id:3,name:o("statuses.canceled"),key:"canceled"},{id:4,name:o("statuses.pending"),key:"pending"}]},re=()=>{const{t:o}=h();return[{title:"№",key:"_index"},{title:"ID",key:"id",hasSort:!0},{title:o("orders.amount"),key:"amount",hasSort:!0},{title:o("orders.device"),key:"device",hasSort:!0},{title:o("orders.payment_method"),key:"payment_method",hasSort:!0},{title:o("orders.status"),key:"status",hasSort:!0},{title:o("orders.date"),key:"date",hasSort:!0}]},ie=()=>{const{t:o}=h();return{noData:{title:o("transactions_not_found"),subtitle:o("transactions_not_found_try_again_later"),image:"/images/no-data/transactions.png"},thClass:"last:!text-left"}},le={key:0,class:"space-y-6"},de={class:"flex items-center justify-between p-4 bg-gray-5 rounded-lg"},ce={class:"flex items-center gap-3"},ue={class:"text-lg font-semibold text-dark"},me={class:"text-sm text-gray-1"},_e={class:"text-right"},pe={class:"text-xs text-gray-1 mt-1"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"space-y-4"},ye={class:"text-md font-semibold text-dark border-b border-gray-4 pb-2"},ge={class:"space-y-3"},he={class:"flex justify-between items-center"},ve={class:"text-sm text-gray-1"},be={class:"text-sm font-medium text-dark"},$e={class:"flex justify-between items-center"},ke={class:"text-sm text-gray-1"},we={class:"text-sm text-dark"},Ve={class:"flex justify-between items-center"},Ce={class:"text-sm text-gray-1"},De={class:"text-sm text-dark"},je={class:"flex justify-between items-center"},Be={class:"text-sm text-gray-1"},Se={class:"flex items-center gap-2"},Ie={class:"text-sm font-mono text-dark"},Te={class:"space-y-4"},Oe={class:"text-md font-semibold text-dark border-b border-gray-4 pb-2"},Ye={class:"space-y-3"},Me={class:"flex justify-between items-center"},Re={class:"text-sm text-gray-1"},Ue={class:"flex justify-between items-center"},He={class:"text-sm text-gray-1"},Pe={class:"text-sm text-dark"},Fe={class:"space-y-4"},Ne={class:"text-md font-semibold text-dark border-b border-gray-4 pb-2"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ae={class:"flex justify-between items-center"},Ee={class:"text-sm text-gray-1"},Le={class:"text-sm text-dark"},Qe={class:"flex justify-between items-center"},qe={class:"text-sm text-gray-1"},Ge={class:"text-sm text-dark"},Je={key:1,class:"flex items-center justify-center py-8"},Ke={class:"flex justify-end gap-3"},We=$({__name:"OrderDetailsModal",props:{modelValue:{type:Boolean},orderUid:{}},emits:["update:modelValue"],setup(o,{emit:_}){const i=o,k=_,{t:v}=h(),{showToast:x}=M(),f=T({get:()=>i.modelValue,set:a=>k("update:modelValue",a)}),r=D(null),y=()=>{f.value=!1,r.value=null},w=async a=>{try{await navigator.clipboard.writeText(a),x("success",v("common.copied"))}catch(l){console.error("Failed to copy:",l),x("error",v("common.copy_failed"))}},d=a=>{switch(a){case"created":return"bg-blue/10 text-blue";case"performed":return"bg-green/10 text-green";case"expired":return"bg-red/10 text-red";default:return"bg-gray-4 text-gray-8"}};return O(()=>i.modelValue,a=>{a&&i.orderUid}),(a,l)=>(m(),Y(n(Q),{title:a.$t("orders.details"),modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=g=>f.value=g),onClose:y,class:"max-w-2xl"},{footer:u(()=>[e("div",Ke,[c(n(L),{text:a.$t("button.close"),variant:"outline",onClick:y},null,8,["text"])])]),default:u(()=>[r.value?(m(),p("div",le,[e("div",de,[e("div",ce,[l[2]||(l[2]=e("div",{class:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center"},[e("i",{class:"icon-document text-white text-xl"})],-1)),e("div",null,[e("h3",ue," Order #"+s(r.value.id),1),e("p",me,s(r.value.external_id),1)])]),e("div",_e,[e("span",{class:C([d(r.value.status),"px-3 py-1 rounded-full text-xs font-medium"])},s(a.$t(`orders.status.${r.value.status}`)),3),e("p",pe,"UID: "+s(r.value.uid),1)])]),e("div",xe,[e("div",fe,[e("h4",ye,s(a.$t("orders.basic_info")),1),e("div",ge,[e("div",he,[e("span",ve,s(a.$t("orders.amount"))+":",1),e("span",be,s(r.value.amount)+" ₽",1)]),e("div",$e,[e("span",ke,s(a.$t("orders.purpose"))+":",1),e("span",we,s(r.value.purpose),1)]),e("div",Ve,[e("span",Ce,s(a.$t("orders.order_ttl"))+":",1),e("span",De,s(r.value.order_ttl)+"s",1)]),e("div",je,[e("span",Be,s(a.$t("orders.external_id"))+":",1),e("div",Se,[e("span",Ie,s(r.value.external_id),1),e("i",{class:"icon-copy text-primary cursor-pointer hover:text-blue transition-300",onClick:l[0]||(l[0]=g=>w(r.value.external_id))})])])])]),e("div",Te,[e("h4",Oe,s(a.$t("orders.status_timing")),1),e("div",Ye,[e("div",Me,[e("span",Re,s(a.$t("orders.status"))+":",1),e("span",{class:C([d(r.value.status),"px-2 py-1 rounded text-xs font-medium"])},s(a.$t(`orders.status.${r.value.status}`)),3)]),e("div",Ue,[e("span",He,s(a.$t("orders.perform_time"))+":",1),e("span",Pe,s(r.value.perform_time?n(V)(r.value.perform_time):a.$t("orders.not_performed")),1)])])])]),e("div",Fe,[e("h4",Ne,s(a.$t("orders.timestamps")),1),e("div",ze,[e("div",Ae,[e("span",Ee,s(a.$t("orders.created_at"))+":",1),e("span",Le,s(n(V)(r.value.created_at)),1)]),e("div",Qe,[e("span",qe,s(a.$t("orders.updated_at"))+":",1),e("span",Ge,s(n(V)(r.value.updated_at)),1)])])])])):(m(),p("div",Je,[...l[3]||(l[3]=[e("div",{class:"loader"},null,-1)])]))]),_:1},8,["title","modelValue"]))}}),Xe=B(We,[["__scopeId","data-v-d880cee2"]]),Ze={class:"bg-white px-6 rounded-xl"},et={class:"flex items-center gap-1"},tt={class:"text-sm font-medium text-dark-black"},st={class:"flex gap-5"},at=$({__name:"POrders",setup(o){const{t:_}=h(),i=S("status",_("statuses.all_statuses")),k=()=>{const d={};return i.value&&i.value!==_("statuses.all_statuses")&&(d.status=i.value),d},{tableData:v,pagination:x,isLoading:f}=E("/explat/orders/",k(),["tab"]),r=D(!1),y=D("");function w(d){y.value=d.uid,r.value=!0}return(d,a)=>{var l,g;return m(),p("section",null,[e("div",Ze,[c(n(P),R({data:n(v),head:n(re)(),loading:n(f),title:d.$t("orders.title"),subtitle:d.$t("orders.count",{count:((l=n(x))==null?void 0:l.count)||0}),total:((g=n(x))==null?void 0:g.count)||0,filter:{status:n(i)}},n(ie)(),{onClickToRow:w}),{id:u(({data:t})=>[e("div",et,[e("span",tt,[H(s(t==null?void 0:t.id)+" ",1),a[2]||(a[2]=e("i",{class:"icon-copy text-primary font-semibold"},null,-1))])])]),amount:u(({data:t})=>[c(n(N),{amount:t==null?void 0:t.amount,currency:"₽"},null,8,["amount"])]),device:u(({data:t})=>[c(n(z),{title:"Device",id:t==null?void 0:t.id},null,8,["id"])]),payment_method:u(({data:t})=>[c(n(A),{number:t==null?void 0:t.external_id,name:"Order",bank:"System",payment_method:t==null?void 0:t.purpose},null,8,["number","payment_method"])]),status:u(({data:t})=>[c(n(q),{status:t==null?void 0:t.status},null,8,["status"])]),date:u(({data:t})=>[c(n(oe),{date:t==null?void 0:t.created_at,time:t==null?void 0:t.created_at},null,8,["date","time"])]),filter:u(()=>[e("div",st,[c(j,{label:d.$t("filter.status")},{default:u(()=>[c(n(F),{modelValue:n(i),"onUpdate:modelValue":a[0]||(a[0]=t=>U(i)?i.value=t:null),options:n(ne)(),"value-key":"key","option-styles":"hover:bg-gray-6","selected-option-styles":"border-none rounded-lg bg-white",class:"min-w-64"},null,8,["modelValue","options"])]),_:1},8,["label"]),c(j,{label:d.$t("interval_of_time")},{default:u(()=>[c(I,{class:"bg-white","start-date-key":"created_at__gte","end-date-key":"created_at__lte"})]),_:1},8,["label"])])]),_:1},16,["data","head","loading","title","subtitle","total","filter"])]),c(Xe,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=t=>r.value=t),"order-uid":y.value},null,8,["modelValue","order-uid"])])}}}),xt=B(at,[["__scopeId","data-v-b9bddcda"]]);export{xt as default};
