import{a0 as a,c as e,a1 as t,a2 as r,L as i,a3 as u,a4 as l,a5 as s,H as o}from"./index-BAoS1bkF.js";import{u as n}from"./FilterDateRange.vue_vue_type_script_setup_true_lang-C_1K-rXA.js";const m=(m,p={},g=["tab"],c=!1,v=10)=>{const y=t(),f=s(),b=n("search",""),h=p.limit??10,d=a({total:0,limit:n("limit",h,{transform:Number}),page:n("page",1,{transform:Number}),offset:0}),q=e(()=>(d.page-1)*d.limit),_=e(()=>{const a={...p,limit:d.limit,offset:q.value};return Object.keys(y.query).forEach(e=>{g.includes(e)||(a[e]=y.query[e])}),a}),N=e(()=>["tableData",m,{..._.value,page:d.page,limit:d.limit}]),{data:j,error:w,refetch:D,isLoading:L}=r({queryKey:N,queryFn:()=>(async(a,e)=>await o.$get(a,e))(m,{params:_.value}),enabled:!!m});i([L,w,j],()=>{L.value||w.value||!j.value||(d.total=j.value.count||0)}),u(()=>{j.value&&j.value.count&&(d.total=j.value.count)});u(()=>{const a=y.query,e=a.limit?Number(a.limit):h,t=Number(a.page)||1,r=a.search||"";r!==b.value?(d.limit=v,d.page=1,b.value=Array.isArray(r)?r[0]:r):(d.limit=e,d.page=t)});l(()=>{window.scrollTo({top:0,behavior:"smooth"})});return{tableData:e(()=>j.value?c?j.value:j.value.results:[]),pagination:d,isLoading:L,error:w,onPageChange:a=>{a&&a!==d.page&&(d.page=a,f.push({query:{...y.query,page:a.toString()}}))},refetch:D}};export{m as u};
