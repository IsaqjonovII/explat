import{a0 as E,c as u,a1 as P,a2 as Q,y as R,a3 as h,a4 as S,a5 as F,I as M}from"./index-8FvB9lgi.js";import{u as l}from"./FilterDateRange.vue_vue_type_script_setup_true_lang-B4G5KdfN.js";const _=10,m=1,C=(i,f={},y=["tab"],b=!1,w=_)=>{const s=P(),I=F(),p=l("search",""),v=f.limit??10,e=E({total:0,limit:l("limit",v,{transform:Number}),page:l("page",m,{transform:Number}),offset:0}),T=u(()=>(e.page-1)*e.limit),g=u(()=>{const a={...f,limit:e.limit,offset:T.value};return Object.keys(s.query).forEach(o=>{y.includes(o)||(a[o]=s.query[o])}),a}),q=u(()=>["tableData",i,{...g.value,page:e.page,limit:e.limit}]),d=async(a,o)=>await M.$get(a,o),{data:t,error:n,refetch:L,isLoading:c}=Q({queryKey:q,queryFn:()=>d(i,{params:g.value}),enabled:!!i});R([c,n,t],()=>{!c.value&&!n.value&&t.value&&(e.total=t.value.count||0)}),h(()=>{t.value&&t.value.count&&(e.total=t.value.count)});const N=a=>{a&&a!==e.page&&(e.page=a,I.push({query:{...s.query,page:a.toString()}}))};h(()=>{const a=s.query,o=a.limit?Number(a.limit):v,D=Number(a.page)||m,r=a.search||"";r!==p.value?(e.limit=w,e.page=m,p.value=Array.isArray(r)?r[0]:r):(e.limit=o,e.page=D)});const A=()=>{window.scrollTo({top:0,behavior:"smooth"})};return S(()=>{A()}),{tableData:u(()=>t.value?b?t.value:t.value.results:[]),pagination:e,isLoading:c,error:n,onPageChange:N,refetch:L}};export{C as u};
